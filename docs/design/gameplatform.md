# GamePlatform 游戏平台

游戏平台是整个 Beagle-Wind-Game 项目的四大核心业务之一。

## 四大核心业务

游戏节点 GameNode
游戏平台 GamePlatform
游戏卡片 GameCard
游戏实例 GameInstance

以上是本项目的四大核心业务。

## 概述

游戏平台负责存储游戏平台的静态信息。

管理员和普通用户都有游戏平台的查看权限和维护权限。
但是两者又有所不同：

### 管理员眼中的游戏平台

游戏平台的所有静态信息，是管理员负责维护的，是相当具有专业性质的核心业务。
其关注以下属性：
基础属性
如何部署的相关属性
如何配置的相关属性

维护什么呢？
游戏平台业务有其特殊性：
游戏平台的容器镜像运行时，要绑定/home/ubuntu 目录到主机上；
而这个目录当前需要以人工交互式操作 Desktop，通过人工视觉与远程桌面来完成游戏平台的配置，才能合理生成用于绑定到/home/ubuntu 的主机数据目录；
这个数据目录无法通过流水线自动生成，所以一旦游戏平台的容器镜像更新版本，那么这个绑定目录就要重新配置生成一次，并上传到 S3 服务器，成为游戏平台配置的一个属性。
令人遗憾的是游戏平台经常升级，1 周一小版本，一个月一个大版本，所以管理员要及时维护游戏平台的数据、文件、安装器，保障用户能够及时用到最新的版本；

### 用户眼中的游戏平台

看什么呢？
由于用户的权限不够，所以文件与安装器，以及其他的安装属性，这些个属性与用户无关，看不到，其他的倒还好，可以开放给用户

维护什么呢？
主要是特定游戏平台确实由于业务特殊性需要用户维护一些数据进来。
游戏平台-Lutris，基本上与用户无关，用户无须设置。
游戏平台-Steam，由于其业务特殊性，用户开始 Steam 游戏前，必须要打开游戏平台-Steam 的网页桌面，在里面交互式操作完成 Steam 登录，由于 Steam 无法二次开发所以用户输入 Steam 登录凭据是必要的操作步骤，另外一个则是通过网页桌面，用户自己去执行交互式操作完成 Steam 登录，整个过程用户不需要向平台提交密码信息，尽力保障了用户的账号信息的安全。
游戏平台-Switch,由于其业务特殊性，用户必须要自己提交密钥信息，这个还好，不用交互式操作，但是要提交一个包含密钥的压缩包给平台。

## GamePlatformUser 游戏平台的用户状态

确实由于业务的特殊性，每个用户都有自己的游戏平台的相关配置啊，如 Steam 的用户登录信息，Switch 的密钥，这些将统一存储在这个类型里面。

## GamePlatformSystem 游戏平台的系统实例

当管理员开启游戏平台，将会生成一个 GamePlatformSystem 对象，GameNodeAgent 会负责将游戏平台实例启动起来。
将会从镜像打开一个游戏平台实例的容器，此时不会运行游戏平台的安装器，与配置命令；
此时管理员使用交互式操作的方式，配置平台完成验证工作；
最后管理员登录游戏平台管理菜单，点击打开的游戏平台，将会观察到游戏平台已经关联了一个 GamePlatformSystem 对象，填完一些信息；
GameNodeAgent 将游戏平台实例关闭，然后上传 System 目录之类的工作。
